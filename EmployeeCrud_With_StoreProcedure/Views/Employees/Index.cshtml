@model IEnumerable<EmployeeCrud_With_StoreProcedure.Models.EmpModel>

@{
    ViewBag.Title = "Index";
}
<style>
    body {
        margin: 0;
        padding: 0;
        background-color: #f1f1f1;
        margin-top: 50px;
    }

    .box {
        width: 1270px;
        padding: 20px;
        background-color: #fff;
        border: 1px solid #ccc;
        border-radius: 5px;
    }
</style>
@*<div style="width:90%;height:20%; margin:0 auto;">
        <table id="myTable">
            <thead>
                <tr>
                    <th>Sr No.</th>
                    <th>Name</th>
                    <th>City</th>
                    <th>Salary</th>
                    <th>Gender</th>
                    <th>JoinDate</th>
                    <th>IsActive</th>
                    <th>Action</th>
                </tr>
            </thead>
        </table>
    </div>*@
<div class="container">
    <div class="table-responsive">
        <br />
        <div class="row">
            <div class="input-daterange">
                <div class="col-md-4">
                    <input type="date" name="start_date" id="start_date" class="form-control" />
                </div>
                <div class="col-md-4">
                    <input type="date" name="end_date" id="end_date" class="form-control" />
                </div>

            </div>
            @*<div class="col-md-4">
                <input type="button" name="search" id="search" value="Search" class="btn btn-info" />
            </div>*@
        </div>
        <div class="row">

            <div class="input-daterange">
                <div class="col-md-2">
                    <div class="input-group clockpicker" data-placement="Right" data-align="top" data-autoclose="true">
                        <input type="text" class="form-control" id="from_time">
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-time"></span>
                        </span>
                    </div>
                </div>
                <div class="col-md-2"></div>
                <div class="col-md-2">
                    <div class="input-group clockpicker" data-placement="left" data-align="top" data-autoclose="true">
                        <input type="text" class="form-control" id="to_time">
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-time"></span>
                        </span>
                    </div>
                </div>
                <div class="col-md-2"></div>
                <div class="col-md-4">
                    <input type="button" name="search" id="search" value="Search" class="btn btn-info" />
                </div>
            </div>
        </div>
        <br />
        <table id="myTable" class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>Sr No.</th>
                    <th>Name</th>
                    <th>City</th>
                    <th>Salary</th>
                    <th>Gender</th>
                    <th>JoinDate</th>
                    <th>IsActive</th>
                    <th>Action</th>
                </tr>
            </thead>
        </table>

    </div>
</div>


@* Load datatable css *@

<link href="//cdn.datatables.net/1.10.9/css/jquery.dataTables.min.css" rel="stylesheet" />
@section Scripts{
    @* Load DataTable js here *@
    <script src="//cdn.datatables.net/1.10.9/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="~/Content/dist/jquery-clockpicker.css">
    <script type="text/javascript" src="~/Content/dist/bootstrap-clockpicker.min.js"></script>
    <script>

        $(document).ready(function () {

            Datatable();
           $('.clockpicker').clockpicker();
            $('#search').click(function () {
                 Datatable();
            });
        });
        function NowTime() {
            var dt = new Date();
            var time = dt.getHours() + ":" + dt.getMinutes() + ":" + dt.getSeconds();
            document.getElementById("from_time").value = time;
            document.getElementById("to_time").value = time;
            return time;
        }

         function Datatable() {
                 var dataTable = $("#myTable").DataTable({
                "processing": true,
                "serverSide": true,
                "filter": true,
                "orderMulti": false,
                "destroy": true,
                "ordering": true,
                "ajax": {
                    "url": "/Employees/GetData",
                    "type": "POST",
                    "datatype": "json",
                    "data": function (data) {
                        // Read values
                        var from_date = $('#start_date').val();
                        var to_date = $('#end_date').val();
                         var from_time = $('#from_time').val();
                        var to_time = $('#to_time').val();

                        // Append to data
                        data.searchByFromdate = from_date;
                        data.searchByTodate = to_date;
                        data.fromtime = from_time;
                        data.totime = to_time;
                    }

                },
                "columns": [
                    { "data": "RowNum", "name": "RowNum", "autoWidth": true },
                    { "data": "Name", "name": "Name", "autoWidth": true },
                    { "data": "City", "name": "City", "autoWidth": true },
                    { "data": "Salary", "name": "Salary", "autoWidth": true },
                    { "data": "Gender", "name": "Gender", "autoWidth": true },
                    {
                        "data": "JoinDate", "name": "JoinDate", "autoWidth": true
                    },
                    { "data": "IsActive", "name": "IsActive", "autoWidth": true },
                    {
                        "mRender": function (data, type, row) {
                            return '<a href="Edit/'+row.Empid+'"  class="btn btn-warning" title="Edit"><i class="glyphicon glyphicon-edit"></i></a>&nbsp;&nbsp;&nbsp;<a href="#" class="btn btn-danger" onclick="Deletedata(' + row.Empid + ')" title="Delete"><i class="glyphicon glyphicon-trash"></i></a>';
                        }
                    }
                ]
            });
            }
         function Deletedata(Id) {
                $.confirm({
                    title: 'Delete Confirm!',
                    content: 'Are you sure you want to delete this Record?',
                    buttons: {
                        confirm: function () {
               var id = Id;

            $.ajax({
                type: "GET",
                dataType: "Json",
                url: '@Url.Action("DeleteEmployee")?id=' + id,
                success: function (result) {
                   Datatable();
                    toastr.success(result);
                },
                error: function (result) {

                }
            });
                             },
                        cancel: function () {

                        },
                    }

                });
        }


//        function Edit(id)
//        {
//            var ="Employees/Edit/+"
//window.location = newLocation;
//return false;
//}
    </script>
}
